# Lab 1: Data Version Control (DVC) with Git

## Learning Objectives

- Understand data versioning for ML projects
- Use DVC to track and version datasets locally
- Integrate DVC with Git for version control
- Revert to previous data versions

## Prerequisites

- Python 3.8+
- Git installed
- Basic command line knowledge

## Setup Instructions

### 1. Navigate to Lab

**Mac:**
```bash
cd ~/path/to/MLOPS-Repo/labs/Lab1-dvc
```

**Windows:**
```bash
cd C:\path\to\MLOPS-Repo\labs\Lab1-dvc
```

### 2. Create Virtual Environment

**Mac:**
```bash
python3 -m venv venv
source venv/bin/activate
```

**Windows:**
```bash
python -m venv venv
venv\Scripts\activate
```

### 3. Install Dependencies

```bash
pip install -r requirements.txt
```

## ðŸ“ Project Structure

```
Lab1-dvc/
â”œâ”€â”€ .dvc/
â”‚   â”œâ”€â”€ .gitignore
â”‚   â””â”€â”€ config
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ .gitignore        # Auto-generated by DVC
â”‚   â”œâ”€â”€ data.txt          # Your actual data (not tracked by Git)
â”‚   â””â”€â”€ data.txt.dvc      # DVC metadata file (tracked by Git)
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

## Initialize DVC

### Step 1: Initialize DVC in Your Project

```bash
# Make sure you're in Lab1-dvc directory
dvc init --subdir
```

This creates `.dvc/` directory with configuration files.

### Step 2: Configure Local Cache

DVC automatically uses `.dvc/cache` to store your data locally. No additional configuration needed!

### Step 3: Commit DVC Setup

```bash
git add .dvc/.gitignore .dvc/config
git commit -m "Initialize DVC"
```

## Track Data with DVC

### Create Sample Data

```bash
# Create a sample data file
echo "This is version 1 of my data" > data/data.txt
```

### Add Data File to DVC

```bash
# Track the data file with DVC
dvc add data/data.txt
```

This creates:
- `data/data.txt.dvc` - Metadata file (tracked by Git)
- Updates `data/.gitignore` - Ensures data.txt is NOT tracked by Git
- Stores actual data in `.dvc/cache/`

### Commit to Git

```bash
# Add DVC files to Git (NOT the actual data!)
git add .dvc/.gitignore data/data.txt.dvc data/.gitignore

# Commit
git commit -m "Add data.txt to DVC tracking"
```

## Test Your Setup

### Basic Workflow

```bash
# Create data
echo "Initial data" > data/test.txt

# Track with DVC
dvc add data/test.txt

# Commit to Git
git add data/test.txt.dvc data/.gitignore
git commit -m "Add test.txt"

# Verify data is in cache
ls .dvc/cache/files/md5/
```



## Understanding DVC

### What DVC Does

- **Tracks large files** without putting them in Git
- **Stores file metadata** (hashes) in `.dvc` files
- **Caches data locally** in `.dvc/cache/`
- **Versions data** through Git commits

### DVC vs Git

| Aspect | Git | DVC |
|--------|-----|-----|
| Tracks | Code, small files | Large data files |
| Storage | `.git/` | `.dvc/cache/` |
| Metadata | Commit history | `.dvc` files |
| Good for | Text files, code | Datasets, models |

### Key Commands

```bash
dvc init          # Initialize DVC in project
dvc add <file>    # Track file with DVC
dvc checkout      # Restore data from cache
dvc status        # Check DVC status
dvc diff          # Compare data versions
```

## Resources

- [DVC Documentation](https://dvc.org/doc)
- [DVC Get Started Guide](https://dvc.org/doc/start)
- [DVC vs Git](https://dvc.org/doc/user-guide/what-is-dvc)

---

**Happy Data Versioning!**